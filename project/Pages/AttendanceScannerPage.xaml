<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.Maui.Controls"
             x:Class="project.Pages.AttendanceScannerPage"
             Title="QR Code Scanner">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Top spacing -->
        <BoxView Grid.Row="0" HeightRequest="40" BackgroundColor="Black" />

        <!-- Camera Barcode Reader - Resized and Centered -->
        <Grid Grid.Row="1" 
              HorizontalOptions="Fill" 
              VerticalOptions="Fill"
              Padding="40">
            <Frame 
                HorizontalOptions="Center"
                VerticalOptions="Center"
                WidthRequest="450"
                HeightRequest="450"
                HasShadow="False"
                BorderColor="Transparent"
                Padding="0"
                BackgroundColor="Black">
                <zxing:CameraBarcodeReaderView 
                    x:Name="BarcodeReader"
                    HorizontalOptions="Fill"
                    VerticalOptions="Fill"
                    BarcodesDetected="OnBarcodeDetected"
                    IsTorchOn="False"
                    IsDetecting="True" />
            </Frame>
        </Grid>

        <!-- Overlay with scanning frame -->
        <Grid Grid.Row="1" BackgroundColor="Transparent">
            <BoxView BackgroundColor="#80000000" />
            <Frame 
                HorizontalOptions="Center"
                VerticalOptions="Center"
                WidthRequest="250"
                HeightRequest="250"
                HasShadow="False"
                BorderColor="White"
                CornerRadius="10"
                BackgroundColor="Transparent"
                Padding="0">
                <Frame.BorderColor>
                    <Color x:FactoryMethod="FromHex">
                        <x:Arguments>
                            <x:String>#00FF00</x:String>
                        </x:Arguments>
                    </Color>
                </Frame.BorderColor>
            </Frame>
        </Grid>

        <!-- Bottom Controls -->
        <Grid Grid.Row="2" 
              BackgroundColor="#F0F0F0"
              Padding="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Label 
                Grid.Row="0"
                Text="Point camera at QR code"
                FontSize="16"
                HorizontalOptions="Center"
                Margin="0,0,0,15" />

            <StackLayout 
                Grid.Row="1"
                Orientation="Horizontal"
                HorizontalOptions="Center"
                Spacing="15">
                <Button 
                    Text="Close"
                    Clicked="OnCloseClicked"
                    BackgroundColor="#DC3545"
                    TextColor="White"
                    WidthRequest="120"
                    HeightRequest="45" />
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>





